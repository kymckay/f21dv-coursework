<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>@kymckay - Data Visualisation and Analytics</title>
    <script src='https://d3js.org/d3.v7.min.js'></script>
</head>
<body>

<script>
    function task2(div) {
        // Add indexed paragraph elements
        div.selectAll('p')
            .data(Array(2).keys())
          .join('p')
            .text(d => `Paragraph ${d}`);

        // Demonstrate changing paragraph via select
        div.select('p')
            .style('color', 'red')
            .style('font-family', 'Mono')
            .style('font-size', '18pt');

        div.insert('p', 'p').text('Demonstrating d3.select():');
    }

    function task3and4(div) {
        // Task 3 makes 10 div elements, with content equal to their
        // index.
        // Used join instead of appending repeatedly as asked because it
        // makes more sense.
        const divs = div.selectAll('div')
            .data(Array(10).keys())
          .join('div')
            .text(d => d);

        // Also part of task 3, first 5 are red and last 5 are green.
        divs.filter((_,i) => i < 5).style('color', 'red');
        divs.filter((_,i) => i >= 5).style('color', 'green');

        // Task 4 selects the first div, sets the content to start and
        // colour to purple
        div.select('div').text('start').style('color', 'purple');
    }

    const tasks = {
        1: div => {
            div.append('p')
                .text(`d3.version: ${d3.version}`);
        },
        2: task2,
        '3 and 4': task3and4,
    }

    const divs = d3.select('body')
      .selectAll('div')
        .data(Object.keys(tasks))
      .join('div');

    // Split page into task headings
    divs.append('h1').text(d => `Task ${d}`);

    // Fill with task results
    divs.each(function(d) {
        tasks[d](d3.select(this));
    });
</script>
</body>
</html>
